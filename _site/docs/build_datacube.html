<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/SimSpin/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/SimSpin/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/SimSpin/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/SimSpin/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>build_datacube | SimSpin</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="build_datacube" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A package for producing mock observations of particle simulations." /> <meta property="og:description" content="A package for producing mock observations of particle simulations." /> <link rel="canonical" href="http://localhost:4000/SimSpin/docs/build_datacube.html" /> <meta property="og:url" content="http://localhost:4000/SimSpin/docs/build_datacube.html" /> <meta property="og:site_name" content="SimSpin" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="build_datacube" /> <script type="application/ld+json"> {"description":"A package for producing mock observations of particle simulations.","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/SimSpin/assets/images/simspin_logo.png"}},"headline":"build_datacube","url":"http://localhost:4000/SimSpin/docs/build_datacube.html","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/SimSpin/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/SimSpin/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="http://localhost:4000/SimSpin/installation/" class="nav-list-link">Installation</a></li><li class="nav-list-item"><a href="http://localhost:4000/SimSpin/basic_usage/" class="nav-list-link">Basic Usage</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/SimSpin/docs/documentation" class="nav-list-link">Documentation</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/SimSpin/docs/make_simspin_file.html" class="nav-list-link">make_simspin_file</a></li><li class="nav-list-item "><a href="http://localhost:4000/SimSpin/docs/telescope.html" class="nav-list-link">telescope</a></li><li class="nav-list-item "><a href="http://localhost:4000/SimSpin/docs/observing_strategy.html" class="nav-list-link">observing_strategy</a></li><li class="nav-list-item active"><a href="http://localhost:4000/SimSpin/docs/build_datacube.html" class="nav-list-link active">build_datacube</a></li><li class="nav-list-item "><a href="http://localhost:4000/SimSpin/docs/write_simspin_FITS.html" class="nav-list-link">write_simspin_fits</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/SimSpin/examples/examples" class="nav-list-link">Examples</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/SimSpin/examples/generating_hdf5.html" class="nav-list-link">HDF5 simulation format</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search SimSpin" aria-label="Search SimSpin" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/kateharborne/SimSpin" class="site-button" target="_blank" rel="noopener noreferrer" > SimSpin on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/SimSpin/docs/documentation">Documentation</a></li> <li class="breadcrumb-nav-list-item"><span>build_datacube</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="constructing-your-data-cube"> <a href="#constructing-your-data-cube" class="anchor-heading" aria-labelledby="constructing-your-data-cube"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Constructing your data cube </h1> <p class="fs-5 fw-300 pb-2">Using the <code class="language-plaintext highlighter-rouge">build_datacube</code> function, we can now make a mock observation of a simulated galaxy.</p> <p class="fw-300">The output of this function will be a mock IFS data cube. The details of the observation will vary depending on the requested <code class="language-plaintext highlighter-rouge">method</code>, <code class="language-plaintext highlighter-rouge">telescope</code> and <code class="language-plaintext highlighter-rouge">observing_strategy</code>, but the format will be consistent across the board. In all cases, the output can be written to a FITS file, with headers that allow the user to reproduce these observations in the future.</p> <p><a href="#example" class="btn btn-purple">See an example</a> <a href="https://github.com/kateharborne/SimSpin/blob/bb371d9e4d981d1ebaba3aa07978bb61a2d434f0/R/build_datacube.R#L77" class="btn btn-purple">See the source code</a></p><hr /> <p>The following code shows the default parameters used in the <code class="language-plaintext highlighter-rouge">make_simspin_file</code> function. Calling the function without specifying anything other than the required input <code class="language-plaintext highlighter-rouge">filename</code> will produce a SimSpin file saved at the same directory location as the input simulation file with the following defaults.</p> <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">build_datacube</span><span class="p">(</span><span class="n">simspin_file</span><span class="p">,</span><span class="w">                     </span><span class="c1"># REQUIRED input SimSpin file      </span><span class="w">
               </span><span class="n">telescope</span><span class="p">,</span><span class="w">                        </span><span class="c1"># REQUIRED telescope class description</span><span class="w">
               </span><span class="n">observing_strategy</span><span class="p">,</span><span class="w">               </span><span class="c1"># REQUIRED observing_strategy class description</span><span class="w">
               </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"spectral"</span><span class="p">,</span><span class="w">              </span><span class="c1"># "spectral", "velocity", "gas" or "sf_gas"</span><span class="w">
               </span><span class="n">verbose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w"> 
               </span><span class="n">write_fits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w"> </span><span class="n">output_location</span><span class="p">,</span><span class="w">  </span><span class="c1"># write to a FITS file? If so, where?</span><span class="w">
               </span><span class="n">object_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"GalaxyID_unknown"</span><span class="p">,</span><span class="w"> </span><span class="c1"># information for FITS file headers</span><span class="w">
               </span><span class="n">telescope_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SimSpin"</span><span class="p">,</span><span class="w">
               </span><span class="n">observer_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Anonymous"</span><span class="p">,</span><span class="w">
               </span><span class="n">split_save</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w"> </span><span class="n">cores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w">        
               </span><span class="n">mass_flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">)</span><span class="w">                    </span><span class="c1"># mass- or luminosity-weighted?</span><span class="w">

</span></code></pre></div></div><hr /> <h2 id="input-parameters"> <a href="#input-parameters" class="anchor-heading" aria-labelledby="input-parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Input Parameters </h2> <div class="table-wrapper"><table> <tbody> <tr> <td><strong>simspin_file</strong></td> <td>The path and filename of the SimSpin file OR the output environment list element constructed using <a href="/SimSpin/docs/make_simspin_file.html"><code class="language-plaintext highlighter-rouge">make_simspin_file</code></a>.</td> </tr> <tr> <td><strong>telescope</strong></td> <td>An object of the <a href="/SimSpin/docs/telescope.html"><code class="language-plaintext highlighter-rouge">telescope</code></a> class that describes the properties of the observing telescope (e.g. the field of view, the spatial resolution, the wavelength resolution, etc.).</td> </tr> <tr> <td><strong>observing_strategy</strong></td> <td>An object of the <a href="/SimSpin/docs/observing_strategy.html"><code class="language-plaintext highlighter-rouge">observing_strategy</code></a> class that defines the properties of the observed simulation (e.g. the projected distance, the relative pointing, the seeing conditions, etc.).</td> </tr> <tr> <td><strong>method</strong></td> <td>A character string that describes whether to generate a spectral data cube or a kinematic data cube. Options include <code class="language-plaintext highlighter-rouge">"spectral"</code> and <code class="language-plaintext highlighter-rouge">"velocity"</code> to produce these for the stellar component of the simulation. If wishing to analyse the kinematics of the gas, you can also specify <code class="language-plaintext highlighter-rouge">"gas"</code> or <code class="language-plaintext highlighter-rouge">"sf_gas"</code> (i.e. star forming gas) to produce a kinematic data cube of this component alone.</td> </tr> <tr> <td><strong>verbose</strong></td> <td>Should the code output text to describe its progress through the build? By default, this will be <code class="language-plaintext highlighter-rouge">FALSE</code>.</td> </tr> <tr> <td><strong>write_fits</strong></td> <td>Should the code write the output data cube to a FITS file? By default, this is <code class="language-plaintext highlighter-rouge">FALSE</code> and output will be stored in an environment variable.</td> </tr> <tr> <td><strong>output_location</strong></td> <td>This is an optional parameter that will only be used if <code class="language-plaintext highlighter-rouge">write_fits = TRUE</code>. Code behavior will depend on the text input. If location is given as just a path to a directory location, the file name will be automatically generated based on the input <code class="language-plaintext highlighter-rouge">simspin_file</code> name and the observing conditions. If the full path and filename are given (ending in “.fits” or “.FITS”) the generated file will be written to that location with that name. Else, in the case that <code class="language-plaintext highlighter-rouge">write_fits = TRUE</code> but no <code class="language-plaintext highlighter-rouge">output_location</code> is specified, the output FITS file will be written to the same directory as the input SimSpin file.</td> </tr> <tr> <td><strong>object_name</strong></td> <td>String used to describe the name of the object observed in the FITS file header.</td> </tr> <tr> <td><strong>telescope_name</strong></td> <td>String used to describe the name of the telescope used for the observation in the FITS file header.</td> </tr> <tr> <td><strong>observer_name</strong></td> <td>String used to describe the name of the person who generated the observation in the FITS file header.</td> </tr> <tr> <td><strong>split_save</strong></td> <td>Only used when <code class="language-plaintext highlighter-rouge">write_fits = TRUE</code>. Should the output FITS be saved as one file with multiple HDUs to describe the output cube and observed images (<code class="language-plaintext highlighter-rouge">split_save = FALSE</code>)? Or should each cube/image be saved to a seperate file (<code class="language-plaintext highlighter-rouge">split_save = TRUE</code>)? In this case, the file name root will be taken from the state of <code class="language-plaintext highlighter-rouge">output_location</code> and descriptive names will automatically be appended to individual files (i.e. “_spectral_cube.FITS”, “_velocity_image.FITS”, etc.).</td> </tr> <tr> <td><strong>cores</strong></td> <td>Specifiying the number of cores to run the code with parallellism turned on.</td> </tr> <tr> <td><strong>mass_flag</strong></td> <td>When <code class="language-plaintext highlighter-rouge">mass_flag = TRUE</code> and <code class="language-plaintext highlighter-rouge">method = "velocity"</code>, the output kinematic properties will be mass weighted rather than luminosity weighted. By default, this parameter is set to <code class="language-plaintext highlighter-rouge">FALSE</code>.</td> </tr> </tbody> </table></div><hr /> <h2 id="example"> <a href="#example" class="anchor-heading" aria-labelledby="example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example </h2> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2022 Katherine Harborne. Distributed by an <a href="https://github.com/kateharborne/SimSpin/blob/master/LICENSE">GPLv3 license.</a></p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0 mr-2"> Page last modified: <span class="d-inline-block">Jun 7 2022 at 03:57 PM</span>. </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="/SimSpin/assets/copyCode.js"></script> </body> </html>
