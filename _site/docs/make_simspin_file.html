<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/SimSpin/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/SimSpin/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/SimSpin/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/SimSpin/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>make_simspin_file | SimSpin</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="make_simspin_file" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A package for producing mock observations of particle simulations." /> <meta property="og:description" content="A package for producing mock observations of particle simulations." /> <link rel="canonical" href="http://localhost:4000/SimSpin/docs/make_simspin_file.html" /> <meta property="og:url" content="http://localhost:4000/SimSpin/docs/make_simspin_file.html" /> <meta property="og:site_name" content="SimSpin" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="make_simspin_file" /> <script type="application/ld+json"> {"description":"A package for producing mock observations of particle simulations.","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/SimSpin/assets/images/simspin_logo.png"}},"headline":"make_simspin_file","url":"http://localhost:4000/SimSpin/docs/make_simspin_file.html","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/SimSpin/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/SimSpin/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="http://localhost:4000/SimSpin/installation/" class="nav-list-link">Installation</a></li><li class="nav-list-item"><a href="http://localhost:4000/SimSpin/basic_usage/" class="nav-list-link">Basic Usage</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/SimSpin/docs/documentation" class="nav-list-link">Documentation</a><ul class="nav-list "><li class="nav-list-item active"><a href="http://localhost:4000/SimSpin/docs/make_simspin_file.html" class="nav-list-link active">make_simspin_file</a></li><li class="nav-list-item "><a href="http://localhost:4000/SimSpin/docs/telescope.html" class="nav-list-link">telescope</a></li><li class="nav-list-item "><a href="http://localhost:4000/SimSpin/docs/observing_strategy.html" class="nav-list-link">observing_strategy</a></li><li class="nav-list-item "><a href="http://localhost:4000/SimSpin/docs/build_datacube.html" class="nav-list-link">build_datacube</a></li><li class="nav-list-item "><a href="http://localhost:4000/SimSpin/docs/write_simspin_FITS.html" class="nav-list-link">write_simspin_fits</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/SimSpin/examples/examples" class="nav-list-link">Examples</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/SimSpin/examples/generating_hdf5.html" class="nav-list-link">HDF5 simulation format</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search SimSpin" aria-label="Search SimSpin" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//github.com/kateharborne/SimSpin" class="site-button" target="_blank" rel="noopener noreferrer" > SimSpin on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/SimSpin/docs/documentation">Documentation</a></li> <li class="breadcrumb-nav-list-item"><span>make_simspin_file</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="making-the-input-file-for-simspin"> <a href="#making-the-input-file-for-simspin" class="anchor-heading" aria-labelledby="making-the-input-file-for-simspin"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Making the input file for SimSpin </h1> <p class="fs-5 fw-300 pb-2">In order to build a data cube with <code class="language-plaintext highlighter-rouge">SimSpin</code>, we need to construct an input file.</p> <p class="fw-300">The purpose of this input file is to prepare all the information of the supplied simulation in a consistent format. It also aims to prepare the computationally expensive steps only once (i.e. the generation of spectra for each star). Once we have generated a <code class="language-plaintext highlighter-rouge">SimSpin</code> file, that file can be used as input to <code class="language-plaintext highlighter-rouge">build_datacube</code> many times.</p> <p><a href="#example" class="btn btn-purple">See an example</a> <a href="https://github.com/kateharborne/SimSpin/blob/d020398fb66274443bb2f70ea1fdd8346c4476ae/R/make_simspin_file.R#L57" class="btn btn-purple">See the source code</a></p><hr /> <p>The following code shows the default parameters used in the <code class="language-plaintext highlighter-rouge">make_simspin_file</code> function. Calling the function without specifying anything other than the required input <code class="language-plaintext highlighter-rouge">filename</code> will produce a SimSpin file saved at the same directory location as the input simulation file with the following defaults.</p> <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">make_simspin_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="w">                         </span><span class="c1"># REQUIRED input file </span><span class="w">
                  </span><span class="n">disk_age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">disk_Z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.024</span><span class="p">,</span><span class="w">     </span><span class="c1"># for N-body disk particles</span><span class="w">
                  </span><span class="n">bulge_age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">bulge_Z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.001</span><span class="p">,</span><span class="w">  </span><span class="c1"># for N-body bulge particles</span><span class="w">
                  </span><span class="n">cores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">write_to_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> 
                  </span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="n">overwrite</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w">
                  </span><span class="n">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"BC03lr"</span><span class="p">,</span><span class="w">              </span><span class="c1"># template choice for spectra</span><span class="w">
                  </span><span class="n">centre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="n">half_mass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w">      </span><span class="c1"># alignment choice</span><span class="w">
                  </span><span class="n">sph_spawn_n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">                  </span><span class="c1"># gas smoothing choice</span><span class="w">
</span></code></pre></div></div><hr /> <h2 id="input-parameters"> <a href="#input-parameters" class="anchor-heading" aria-labelledby="input-parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Input Parameters </h2> <div class="table-wrapper"><table> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">filename</code></td> <td>The path to the snapshot file containing the galaxy of interest. Note that this file can be a Gadget binary file or an HDF5 file directly from a simulation. In the case that your simulation outputs data in an alternative format, either see <a href="examples/generating_hdf5">this example</a> for more information about how to set up an HDF5 file for <code class="language-plaintext highlighter-rouge">SimSpin</code>, or <a href="https://github.com/kateharborne/SimSpin/issues/new/choose">file an issue on GitHub</a> to see the inclusion of your format in the <code class="language-plaintext highlighter-rouge">SimSpin</code> code directly.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">cores</code></td> <td>The number of cores across which to multi-thread the problem.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">disk_age</code></td> <td>The age of the disk particles in Gyr, used only if the input file is an N-body model.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">bulge_age</code></td> <td>The age of the bulge particles in Gyr, used only if the input file is an N-body model.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">disk_Z</code></td> <td>The metallicity of the disk particles in units of solar, used only if the input file is an N-body model.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">bulge_Z</code></td> <td>The metallicity of the bulge particles in units of solar, used only if the input file is an N-body model.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">template</code></td> <td>The stellar templates from which to derive the SEDs for each stellar particle. Options include <code class="language-plaintext highlighter-rouge">"BC03lr"</code> (GALEXEV low resolution, Bruzual &amp; Charlot 2003), <code class="language-plaintext highlighter-rouge">"BC03hr"</code> (GALEXEV high resolution, Bruzual &amp; Charlot 2003) and <code class="language-plaintext highlighter-rouge">"EMILES"</code> (Vazdekis et al 2016). The details of these templates are shown in the <a href="#notes">additional information</a> below.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">write_to_file</code></td> <td>Boolean to specify whether the list produced should be written to a “.Rdata” file or output to the environment. Default is TRUE, so that files can be re-observed without having the generate spectra each time.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">output</code></td> <td>The path at which the output file is written. If not provided, file will be written at the location of the input filename with the addition of “_spectra.Rdata”.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">overwrite</code></td> <td>If true, and the file already exists at the output location, a new file will be written over the old one. Default is FALSE.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">centre</code></td> <td>If simulation file contains all particles cutout from a box (rather than just particles from a single galaxy), you can specify the point around which the view should be centred. Numeric length = 3. Default is NA, in which case the system is centred around the median position of stellar particles.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">half_mass</code></td> <td>If simulation file contains all particles cutout from a box (rather than just particles from a single galaxy), you can the half-mass value at which the alignment function is run. Numeric length = 1. Default is NA, in which case half the total mass of the supplied simulation data is used.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">sph_spawn_n</code></td> <td>Numeric describing the number of gas particles with which to sample the SPH smoothing length. Default is 1, which will not spawn additional gas particles. Increasing this value increases the number of particles used to model the gas distribution. This value may need to be tested for convergence depending on the resolution of the grid used to image the gas properties at the <code class="language-plaintext highlighter-rouge">build_datacube()</code> stage.</td> </tr> </tbody> </table></div><hr /> <h2 id="output-value"> <a href="#output-value" class="anchor-heading" aria-labelledby="output-value"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Output Value </h2> <p>The output of <code class="language-plaintext highlighter-rouge">make_simspin_file</code> is a <em>List</em> element. If <code class="language-plaintext highlighter-rouge">write_to_file = T</code>, this list will be written to an .Rdata file at the location specified by <code class="language-plaintext highlighter-rouge">output</code>. Otherwise, it will be written as a variable to the environment.</p> <p>The list will contain the following 5 elements:</p> <ol> <li> <p><code class="language-plaintext highlighter-rouge">header</code> - <em>List</em> element containing eight labelled properties for data transparency and reproducability.</p> <div class="table-wrapper"><table> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">InputFile</code></td> <td>the file path to the original simulation file.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">OutputFile</code></td> <td>the original location that the SimSpin file was written to.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Type</code></td> <td>the classification of the input simulation file, one of <code class="language-plaintext highlighter-rouge">nbody</code>, <code class="language-plaintext highlighter-rouge">EAGLE</code>, or <code class="language-plaintext highlighter-rouge">Magneticum</code> (though this list is ever growing).</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Template</code></td> <td>the spectral template used to construct spectra for each stellar particle.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Template_LSF</code></td> <td>the line-spread-function assoicated with the template spectra in angstrom.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Template_waveres</code></td> <td>the wavelength resolution given by the binning size in angstrom.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Origin</code></td> <td>the version of SimSpin used to build the file.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Date</code></td> <td>the date and time at which the SimSpin file was built.</td> </tr> </tbody> </table></div> </li> <li> <p><code class="language-plaintext highlighter-rouge">star_part</code> - A <em>data.table</em> element containing properties of each stellar particle contained in the simulation. (<code class="language-plaintext highlighter-rouge">NULL</code> if no star particles are present in the simulation.)</p> <div class="table-wrapper"><table> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">ID</code></td> <td>the unique stellar particle ID number.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">x</code>, <code class="language-plaintext highlighter-rouge">y</code> and <code class="language-plaintext highlighter-rouge">z</code></td> <td>the stellar particle positions in each of the 3 dimensions in kpc.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">vx</code>, <code class="language-plaintext highlighter-rouge">vy</code>, <code class="language-plaintext highlighter-rouge">vz</code></td> <td>the stellar particle velocities in each of the 3 dimensions in km/s.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Mass</code></td> <td>the stellar particle mass in solar masses.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">sed_id</code></td> <td>the index of the spectrum associated with each stellar particle (i.e. the respective row in the <code class="language-plaintext highlighter-rouge">spectra</code> element below.)</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Metallicity</code></td> <td>the stellar metallicity of a given particle in units of solar metallicity. For <code class="language-plaintext highlighter-rouge">nbody</code> models, these values are assigned by the function. For any hydrodynamical simulations, these values are pulled from the simulation file.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Age</code></td> <td>the stellar age of each particle given in Gyr. For <code class="language-plaintext highlighter-rouge">nbody</code> models, these values are assigned by the function. For any hydrodynamical simulations, these values are pulled from the simulation file.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Initial_Mass</code></td> <td>the stellar mass of each star particle at the birth of the star (used for scaling spectra). For <code class="language-plaintext highlighter-rouge">nbody</code> models, these values are assigned by the function. We assume that the star has doubled in mass since its birth by default. For any hydrodynamical simulations, these values are pulled from the simulation file.</td> </tr> </tbody> </table></div> </li> <li> <p><code class="language-plaintext highlighter-rouge">gas_part</code> - A <em>data.table</em> element containing properties of each gas particle contained within the simulation. (<code class="language-plaintext highlighter-rouge">NULL</code> if no gas particles are present in the simulation.)</p> <div class="table-wrapper"><table> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">ID</code></td> <td>the unique gas particle ID number.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">x</code>, <code class="language-plaintext highlighter-rouge">y</code> and <code class="language-plaintext highlighter-rouge">z</code></td> <td>the gas particle positions in each of the 3 dimensions in kpc.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">vx</code>, <code class="language-plaintext highlighter-rouge">vy</code>, <code class="language-plaintext highlighter-rouge">vz</code></td> <td>the gas particle velocities in each of the 3 dimensions in km/s.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Mass</code></td> <td>the gas particle mass in solar masses.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SFR</code></td> <td>the instananeous star formation rate of the gas particle.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Density</code></td> <td>the density of the gas within the simulation given in solar masses per kpc^3.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Temperature</code></td> <td>the temperature of that gas particle in K.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">SmoothingLength</code></td> <td>the size of the the SPH smoothing kernel in kpc.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Metallicity</code></td> <td>the smoothed gas mass of elements heavier than Helium divided by the mass of the particle.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Carbon</code></td> <td>the fraction of carbon within the particle, given as a fraction of its total mass.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Hydrogen</code></td> <td>the fraction of hydrogen within the particle, given as a fraction of its total mass.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Oxygen</code></td> <td>the fraction of oxygen within the particle, given as a fraction of its total mass.</td> </tr> </tbody> </table></div> </li> <li> <p><code class="language-plaintext highlighter-rouge">spectra</code> - A <em>data.table</em> element containing the spectral flux associated with each particle, linked to each particle by the <code class="language-plaintext highlighter-rouge">sed_id</code> within the <code class="language-plaintext highlighter-rouge">star_part</code> element. Each row corresponds to the spectrum associated with an individual spectral ID.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">wave</code> - <em>Numeric</em> element containing the wavelengths in angstrom for the spectra in the element above.</p> </li> </ol><hr /> <h2 id="example"> <a href="#example" class="anchor-heading" aria-labelledby="example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example </h2> <p>Using a Gadget model stored within the SimSpin software, we can write a SimSpin file directly to the R environment with all other defaults:</p> <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Load a Gadget model...</span><span class="w">
</span><span class="n">simulation_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">system.file</span><span class="p">(</span><span class="s2">"extdata"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SimSpin_example_Gadget"</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SimSpin"</span><span class="p">)</span><span class="w">
</span><span class="c1"># ... use to build a SimSpin file. </span><span class="w">
</span><span class="n">simspin_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">make_simspin_file</span><span class="p">(</span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">simulation_file</span><span class="p">,</span><span class="w">
                                 </span><span class="n">write_to_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p>Examining the SimSpin file produced, we can see that it contains:</p> <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summary</span><span class="p">(</span><span class="n">simspin_file</span><span class="p">)</span><span class="w">
</span><span class="c1">#           Length Class      Mode</span><span class="w">
</span><span class="c1"># header       8   -none-     list    </span><span class="w">
</span><span class="c1"># star_part   12   data.frame list   </span><span class="w">
</span><span class="c1"># gas_part     0   -none-     NULL   </span><span class="w">
</span><span class="c1"># spectra      2   -none-     list   </span><span class="w">
</span><span class="c1"># wave       842   -none-     numeric</span><span class="w">
</span></code></pre></div></div> <ul> <li><code class="language-plaintext highlighter-rouge">header</code> is a list that contains details of the file you’ve just created. This allows you to recreate this file in the future using the same information. <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">names</span><span class="p">(</span><span class="n">simspin_file</span><span class="o">$</span><span class="n">header</span><span class="p">)</span><span class="w">
</span><span class="c1"># [1] "InputFile"        "OutputFile"       "Type"             "Template"            </span><span class="w">
</span><span class="c1"># [5] "Template_LSF"     "Template_waveres" "Origin"           "Date"        </span><span class="w">
</span></code></pre></div> </div> </li> <li><code class="language-plaintext highlighter-rouge">star_part</code> is a data.frame that contains the stellar particle information for that simulation. As the input model was an N-body model, this is a summary of both the disk (<code class="language-plaintext highlighter-rouge">PartType2</code>) and bulge (<code class="language-plaintext highlighter-rouge">PartType3</code>) particle properties. If the input model was a hydrodynamic simulation, this would just contain the stellar particle information (<code class="language-plaintext highlighter-rouge">PartType4</code>). <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">names</span><span class="p">(</span><span class="n">simspin_file</span><span class="o">$</span><span class="n">star_part</span><span class="p">)</span><span class="w">
</span><span class="c1">#  [1] "ID"           "x"            "y"            "z"            "vx"           </span><span class="w">
</span><span class="c1">#  [6] "vy"           "vz"           "Mass"         "sed_id"       "Metallicity"</span><span class="w">
</span><span class="c1"># [11] "Age"          "Initial_Mass"</span><span class="w">
</span></code></pre></div> </div> </li> <li><code class="language-plaintext highlighter-rouge">gas_part</code> in this file is NULL as the input simulation was an N-body model. However, in the case that the input was a hydrodynamical simulation with gas particles, this would be a data.frame similar to <code class="language-plaintext highlighter-rouge">star_part</code> but summarising the gas particle properties instead. <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">simspin_file</span><span class="p">[[</span><span class="s2">"gas_part"</span><span class="p">]]</span><span class="w">
</span><span class="c1"># NULL</span><span class="w">
</span></code></pre></div> </div> </li> <li><code class="language-plaintext highlighter-rouge">spectra</code> is a list where each element describes the flux at a given wavelength for one group of stellar particles. These have been generated within the function for a distinct group of stellar particle ages and metallicities using the specified <code class="language-plaintext highlighter-rouge">template</code> spectra. Mapping between stellar particles and their respective spectra is given by the <code class="language-plaintext highlighter-rouge">sed_id</code> within the <code class="language-plaintext highlighter-rouge">star_part</code> data.frame. Each number <code class="language-plaintext highlighter-rouge">sed_id</code> corresponds to the element within <code class="language-plaintext highlighter-rouge">spectra</code> list. Because the input simulation was an N-body model, we only have two associated spectra - one for the disk particles (with <code class="language-plaintext highlighter-rouge">disk_age = 5</code> and <code class="language-plaintext highlighter-rouge">disk_Z = 0.024</code>) and one for the bulge particles (with <code class="language-plaintext highlighter-rouge">bulge_age = 10</code> and <code class="language-plaintext highlighter-rouge">bulge_Z = 0.001</code>). <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">simspin_file</span><span class="p">[[</span><span class="s2">"spectra"</span><span class="p">]]</span><span class="w">
</span><span class="c1">#[[1]]</span><span class="w">
</span><span class="c1">#   [1] 7.659288e-10 1.176103e-09 1.558386e-09 2.104659e-09 2.769032e-09 3.559435e-09 </span><span class="w">
</span><span class="c1">#   [7] 4.178723e-09 5.006696e-09 6.134861e-09 8.460731e-09 1.130473e-08 1.429757e-08 </span><span class="w">
</span><span class="c1">#  [13] ... [1221]</span><span class="w">
</span><span class="c1">#[[2]]</span><span class="w">
</span><span class="c1">#   [1] 1.089325e-08 1.397532e-08 1.675843e-08 2.010100e-08 2.321242e-08 2.587942e-08 </span><span class="w">
</span><span class="c1">#   [7] 2.695232e-08 2.921529e-08 3.182460e-08 4.229105e-08 4.810211e-08 5.303458e-08 </span><span class="w">
</span><span class="c1">#  [13] ... [1221]</span><span class="w">
</span></code></pre></div> </div> </li> <li>Finally <code class="language-plaintext highlighter-rouge">wave</code> contains the wavelength values in units of angstrom for all of the spectra contained in the <code class="language-plaintext highlighter-rouge">spectra</code> list. <div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">simspin_file</span><span class="p">[[</span><span class="s2">"wave"</span><span class="p">]]</span><span class="w">
</span><span class="c1">#   [1]    91    94    96    98   100   102   104   106   108   110   114   118   121   125   </span><span class="w">
</span><span class="c1">#  [15]   127   128   131   132   134   137   140   143   147   151   155   159   162   166   </span><span class="w">
</span><span class="c1">#  [29] ... [1221]</span><span class="w">
</span></code></pre></div> </div> </li> </ul><hr /> <h2 id="notes"> <a href="#notes" class="anchor-heading" aria-labelledby="notes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Notes </h2> <h3 id="spectral-template-choice"> <a href="#spectral-template-choice" class="anchor-heading" aria-labelledby="spectral-template-choice"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Spectral Template Choice </h3> <p>Spectral templates provide a grid of modelled spectra for a known stellar population. The grid associates a stellar age and metallicity to each spectrum in the template. These are used throughout integral field spectroscopy to determine the stellar population properties of the observed galaxy.</p> <p>In SimSpin, we follow this methodology in reverse. As opposed to fitting the spectrum to find the age and metallicity of the underlying stellar population, we use the stellar age and metallicity to assign a spectrum using the chosen template library. While the output is consistent between hydrodynamical and <em>N</em>-body models, we discuss the differences in methodology between these inputs below:</p> <ul> <li><strong>Hydrodynamical simulations</strong> track the age and metallicity of each stellar particle. We use these parameters to select the spectrum that should be associated with each star. Individual particles are initially binned into groups of age and metallicity with width 20 Myr and 0.1 Z<sub>☉</sub> respectively. Stellar particles that fall within each age-metallicity bin will be associated with a single spectrum. This simplification is made to reduce the number of spectra that need to be stored and hence optimise memory usage within SimSpin.</li> <li><strong>N-body models</strong> consider stellar particles as collisionless bulge and disk components, but do not model their the stellar properties of age and metallicity. These properties must be assigned before SimSpin can generate a spectrum. Of course, the values chosen will change the shape of the associated spectrum and the relative brightness of the individual constituents. Commonly, we assign different age and luminosity values to each population of particles to represent the younger, metal-rich disk and older, metal-poor bulge. This choice is arbitrary and depends on the science in question. To avoid systematic differences, the age and metallicity of all components can be set equal.</li> </ul> <p>Available spectral templates include:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Name</th> <th>Age Steps</th> <th>Age Range (Gyr)</th> <th>Z Steps</th> <th>Z Range (Z<sub>☉</sub>)</th> <th>λ Steps (Å)</th> <th>λ Range (Å)</th> <th>σ<sub>LSF</sub> (Å)</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">BC03lr</code></td> <td>221</td> <td>0 - 20</td> <td>6</td> <td>0.0001 - 0.05</td> <td>842</td> <td>91 - 20000</td> <td>3</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">BC03hr</code></td> <td>221</td> <td>0 - 20</td> <td>6</td> <td>0.0001 - 0.05</td> <td>6521</td> <td>91 - 20000</td> <td>3</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">EMILES</code></td> <td>53</td> <td>0.03 - 14</td> <td>12</td> <td>0.0001 - 0.04</td> <td>20356</td> <td>1680 - 20000</td> <td>2.51</td> </tr> </tbody> </table></div><hr /> <p>Now that you’ve built a SimSpin file, you can go one to set up the observations with a mock telescope…</p> <p><a href="/SimSpin/docs/telescope.html" class="btn btn-purple">Next Step: telescope</a></p> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2022 Katherine Harborne. Distributed by an <a href="https://github.com/kateharborne/SimSpin/blob/master/LICENSE">GPLv3 license.</a></p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0 mr-2"> Page last modified: <span class="d-inline-block">May 27 2022 at 03:57 PM</span>. </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="/SimSpin/assets/copyCode.js"></script> </body> </html>
